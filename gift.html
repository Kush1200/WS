<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Choose Your Gift - Meka</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@300;600&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'romantic-pink': '#ff85a2',
                    },
                    fontFamily: {
                        serif: ['Playfair Display', 'serif'],
                        sans: ['Montserrat', 'sans-serif'],
                        handwritten: ['Dancing Script', 'cursive'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background: linear-gradient(-45deg, #fce7f3, #f3e8ff, #fbcfe8, #e9d5ff);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            /* Changed overflow to hidden only on X to allow vertical scroll if needed */
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .glass-card {
            background: rgba(255, 185, 208, 0.8);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .perspective-1000 {
            perspective: 1000px;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
        }

        .flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 1.5rem;
        }

        .card-back {
            transform: rotateY(180deg);
            background: white;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center px-4 py-20">
    <nav class="fixed top-8 left-1/2 -translate-x-1/2 z-50">
        <div class="glass-card rounded-full px-8 py-3 flex justify-center items-center text-gray-700 font-semibold text-xs shadow-lg">
            <a href="home.html" class="text-romantic-pink hover:scale-110 transition-transform duration-300 flex items-center gap-2">
                 Home
            </a>
        </div>
    </nav>

    <div class="text-center mb-8 md:mb-12 opacity-0" id="title-section">
        <h1 class="text-4xl md:text-7xl font-serif text-gray-800 mb-2 md:mb-4">Choose Your Gift</h1>
        <p class="text-gray-500 font-handwritten text-2xl md:text-3xl text-romantic-pink">Which one is calling to you?</p>
    </div>

    <div class="flex flex-nowrap md:flex-wrap justify-center items-center gap-3 md:gap-6 w-full max-w-5xl opacity-0" id="card-container">
        
        <div class="gift-card w-28 h-44 sm:w-40 sm:h-60 md:w-64 md:h-80 perspective-1000 flex-shrink-0 cursor-default" onclick="handleCardClick(this)">
            <div class="card-inner">
                <div class="card-face glass-card border-2 border-white/50 text-white text-4xl md:text-6xl font-serif">?</div>
                <div class="card-face card-back shadow-2xl overflow-hidden p-1 md:p-2">
                    <img src="huda.png" class="w-full h-full object-cover rounded-xl" alt="Meka's Gift">
                </div>
            </div>
        </div>

        <div class="gift-card w-28 h-44 sm:w-40 sm:h-60 md:w-64 md:h-80 perspective-1000 flex-shrink-0 cursor-default" onclick="handleCardClick(this)">
            <div class="card-inner">
                <div class="card-face glass-card border-2 border-white/50 text-white text-4xl md:text-6xl font-serif">?</div>
                <div class="card-face card-back shadow-2xl overflow-hidden p-1 md:p-2">
                    <img src="huda.png" class="w-full h-full object-cover rounded-xl" alt="Meka's Gift">
                </div>
            </div>
        </div>

        <div class="gift-card w-28 h-44 sm:w-40 sm:h-60 md:w-64 md:h-80 perspective-1000 flex-shrink-0 cursor-default" onclick="handleCardClick(this)">
            <div class="card-inner">
                <div class="card-face glass-card border-2 border-white/50 text-white text-4xl md:text-6xl font-serif">?</div>
                <div class="card-face card-back shadow-2xl overflow-hidden p-1 md:p-2">
                    <img src="huda.png" class="w-full h-full object-cover rounded-xl" alt="Meka's Gift">
                </div>
            </div>
        </div>
    </div>

    <div class="mt-10 md:mt-12 opacity-0" id="controls">
        <button id="shuffle-btn" onclick="startShuffle()" class="glass-card px-8 py-3 md:px-10 md:py-4 rounded-full text-gray-700 font-bold text-lg md:text-xl hover:bg-romantic-pink hover:text-white transition-all shadow-xl active:scale-95">
            Shuffle Cards 
        </button>
    </div>

    <script>
        let isShuffled = false;
        let hasPicked = false;

        window.onload = () => {
            gsap.to("#title-section", { opacity: 1, y: 0, duration: 1 });
            gsap.to("#card-container", { opacity: 1, duration: 1, delay: 0.5 });
            gsap.to("#controls", { opacity: 1, duration: 1, delay: 0.8 });
        };

        function startShuffle() {
            const btn = document.getElementById('shuffle-btn');
            const cards = document.querySelectorAll('.gift-card');
            
            btn.innerHTML = "Shuffling...";
            btn.classList.add('opacity-50', 'pointer-events-none');

            // Dynamic Distance Calculation: 
            // On desktop we use 220px, on mobile we use a percentage of screen width
            const isMobile = window.innerWidth < 768;
            const moveX = isMobile ? window.innerWidth * 0.25 : 220;

            let tl = gsap.timeline({
                onComplete: () => {
                    isShuffled = true;
                    btn.innerHTML = "Pick your card!";
                    btn.classList.remove('opacity-50', 'pointer-events-none');
                    cards.forEach(card => card.style.cursor = "pointer");
                }
            });

            for (let i = 0; i < 6; i++) {
                const direction = i % 2 === 0 ? 1 : -1;
                tl.to(cards[0], { x: moveX * direction, duration: 0.15, ease: "power1.inOut" }, i * 0.2)
                  .to(cards[2], { x: -moveX * direction, duration: 0.15, ease: "power1.inOut" }, i * 0.2)
                  .to(cards[1], { y: direction * (isMobile ? 15 : 30), duration: 0.15, ease: "power1.inOut" }, i * 0.2);
            }
            
            tl.to(cards, { x: 0, y: 0, duration: 0.4, ease: "back.out(1.2)" });
        }

        function handleCardClick(element) {
            if (!isShuffled || hasPicked) return;

            hasPicked = true;
            element.classList.add('flipped');

            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#ff85a2', '#ffffff']
            });

            const cards = document.querySelectorAll('.gift-card');
            cards.forEach(card => {
                if (card !== element) {
                    gsap.to(card, { opacity: 0.3, scale: 0.85, duration: 0.6 });
                    card.style.cursor = "default";
                }
            });
        }
    </script>
</body>
</html>